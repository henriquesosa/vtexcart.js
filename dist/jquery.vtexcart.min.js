!function(a){"use strict";var b={effect:"overlay"},c=null,d={openCart:function(){var d=-1*a(c).width();"push"==b.effect&&a(b.wrapper).animate({marginLeft:d}),a(c).animate({right:0}),a(".sta-cart-overlay").fadeIn()},closeCart:function(){var d=-1*a(c).width();"push"==b.effect&&a(b.wrapper).animate({marginLeft:0}),a(c).animate({right:d}),a(".sta-cart-overlay").fadeOut()},fillCart:function(){vtexjs.checkout.getOrderForm().done(function(b){var e,f=b.items;if(a(c).find(".sta-cart-sub strong").html("R$ "+d.toReal(b.value)),a(c).find(".sta-cart-total strong").html("R$ "+d.toReal(b.value)),a(".openCart").text(f.length),a(c).find("ul").html(""),f.length>0)for(a(".sta-cart-resume a").removeClass("disabled"),e=0;e<f.length;e++)a(c).find("ul").append('<li> <div class="sta-cart-pdt-image"><img src="'+f[e].imageUrl+'" /></div> <div class="sta-cart-pdt-info"> <h4>'+f[e].name+'</h4> <button class="remove-item" data-index="'+e+'"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 125" enable-background="new 0 0 100 100" xml:space="preserve"><polygon fill="#000" points="88.711,86.588 52.121,50 88.709,13.412 86.588,11.291 50,47.878 13.41,11.291 11.289,13.412   47.878,50 11.289,86.588 13.41,88.709 50,52.12 86.59,88.709 "/></svg></button> <div class="sta-cart-pdt-qtd"></div> <p>'+f[e].formattedPrice+"</p> </div> </li>");else a(".sta-cart-resume a").addClass("disabled"),d.closeCart()})},addItem:function(b){var c=["javascript",":","alert('Por favor, selecione o modelo desejado.');"].join(""),e=a(b).attr("href");return e==c?(alert("Por favor, selecione o modelo desejado."),!1):(d.openCart(),void a.ajax({url:e.replace("true","false"),type:"GET",crossDomain:!0,dataType:"html",success:function(){d.fillCart()}}))},removeItem:function(a){confirm("Deseja realmente remover o item do carrinho?")&&vtexjs.checkout.getOrderForm().then(function(b){var c=b.items[a];return c.index=a,vtexjs.checkout.removeItems([c])}).done(function(a){d.fillCart()})},toReal:function(a){return a/=100,a=a.toFixed(2).toString().replace(".",",")}};a.fn.vtexcart=function(e){var f=this;b=a.extend(b,e);var g='<div class="sta-cart-overlay"></div><div class="sta-cart-container"> <div class="sta-cart-title"> <button class="sta-cart-close"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 125" enable-background="new 0 0 100 100" xml:space="preserve"><polygon fill="#000" points="88.711,86.588 52.121,50 88.709,13.412 86.588,11.291 50,47.878 13.41,11.291 11.289,13.412   47.878,50 11.289,86.588 13.41,88.709 50,52.12 86.59,88.709 "/></svg></button> <h3>Meu Carrinho</h3> </div> <div class="sta-cart-items"> <ul></ul> </div> <div class="sta-cart-resume"> <span class="sta-cart-sub">Subtotal<strong>R$ 0,00</strong></span> <span class="sta-cart-freight">Frete<strong style="display:none">0</strong><button>Calcular</button><input type="text" /></span> <span class="sta-cart-total">Total<strong>R$ 0,00</strong></span> <a href="/checkout/#/email">Proceder para checkout</a> </div> </div>',h='<a href="#" class="openCart"><span></span></a>';a(f).append(g),b.cartButton&&a(b.cartButton).append(h),c=a(f).find(".sta-cart-container"),d.fillCart(),a(b.buyButton).on("click",function(b){d.addItem(a(this)),b.preventDefault()}),a(".openCart").on("click",function(a){d.openCart(),a.preventDefault()}),a(".sta-cart-close, .sta-cart-overlay").on("click",function(){d.closeCart()}),a(".sta-cart-container").on("click",".remove-item",function(){var b=a(this).data("index");d.removeItem(b)}),a(".sta-cart-resume a").on("click",function(){return a(this).hasClass("disabled")?!1:!0}),a(".sta-cart-freight button").click(function(){a(this).hide(),a(".sta-cart-freight input").show()})}}(jQuery);